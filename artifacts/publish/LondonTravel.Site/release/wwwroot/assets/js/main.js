(()=>{"use strict";var e,t={547:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var i=n(853),r=n(271),o=n(857),a=n(95),s=n(589),c=n(876),u=function(){function e(){}return e.prototype.initialize=function(){this.updateBanner(),this.loadImages(),this.setupServiceWorker(),this.configureAnalytics(),this.configureTelemetry(),r.Manage.initialize(),(new o.Preferences).initialize(),i.Banner.show(),a.SwaggerUI.configure()},e.prototype.configureAnalytics=function(){document.querySelectorAll("a, button, input, .ga-track-click").forEach((function(e){e.addEventListener("click",(function(t){var n=e.getAttribute("data-ga-label")||e.getAttribute("id");if(n){var i=e.getAttribute("data-ga-category")||"General",r=e.getAttribute("data-ga-action")||"clicked";c.Tracking.track(i,r,n)}}))}))},e.prototype.configureTelemetry=function(){(new s.Telemetry).initialize()},e.prototype.loadImages=function(){if("$"in window){var e=window.$;document.querySelectorAll("img.lazy").forEach((function(t){setTimeout((function(){e(t).lazyload()}),500)}))}},e.prototype.setupServiceWorker=function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then((function(){})).catch((function(e){console.warn("Failed to register Service Worker: ",e)}))},e.prototype.updateBanner=function(){if("moment"in window){var e=document.getElementById("build-date"),t=document.querySelector('meta[name="x-request-locale"]').getAttribute("content"),n=window.moment;if(n.locale(t),e){var i=n(e.getAttribute("data-timestamp"),e.getAttribute("data-format"));if(i.isValid()){var r=i.fromNow();e.textContent="| Last updated ".concat(r)}}}},e}();t.App=u},853:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Banner=void 0;var n=function(){function e(){}return e.show=function(){console.log("%cDownload the London Travel Alexa skill from Amazon: https://www.amazon.co.uk/dp/B01NB0T86R","color: #2c3e50;")},e}();t.Banner=n},271:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Manage=void 0;var n=function(){function e(){}return e.initialize=function(){var e=document.querySelector(".js-hidden-control"),t=document.querySelector(".js-modal-form"),n=document.querySelector(".js-modal");e&&(e.classList.remove("d-none"),"$"in window&&(0,window.$)(e).fadeIn()),t&&t.addEventListener("submit",(function(){t.querySelector(".js-delete-control").classList.add("disabled"),t.querySelector(".js-delete-content").classList.add("d-none"),t.querySelector(".js-delete-loader").classList.remove("d-none")})),n&&n.addEventListener("show.bs.modal",(function(){setTimeout((function(){var e=n.querySelector(".js-modal-confirm");e.disabled=!1,e.classList.remove("disabled")}),3e3)}))},e}();t.Manage=n},857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Preferences=void 0;var n=function(){function e(){}return e.prototype.initialize=function(){var e=this;this.container=document.querySelector(".js-preferences-container"),this.container&&(this.initialState=this.getCurrentState(),this.clearButton=this.container.querySelector(".js-preferences-clear"),this.resetButton=this.container.querySelector(".js-preferences-reset"),this.saveButton=this.container.querySelector(".js-preferences-save"),this.favoritesCount=this.container.querySelector(".js-favorites-count"),this.favoritesCount&&this.favoritesCount.classList.remove("d-none"),this.otherCount=this.container.querySelector(".js-other-count"),this.otherCount&&this.otherCount.classList.remove("d-none"),this.container.querySelectorAll(".js-travel-line").forEach((function(t){t.addEventListener("click",(function(){var n='input[type="checkbox"]',i=t.querySelector(n);i||(i=t.parentElement.querySelector(n)),"LI"===t.tagName.toUpperCase()&&(i.checked=!i.checked),e.checkCurrentState()}))})),this.resetButton.addEventListener("click",(function(){e.resetFavoriteLines()})),this.resetButton.classList.add("disabled"),this.resetButton.classList.remove("d-none"),this.resetButton.disabled=!0,""===this.initialState&&(this.clearButton.classList.add("disabled"),this.clearButton.disabled=!0),this.clearButton.addEventListener("click",(function(){e.getAllCheckboxes().forEach((function(e){e.checked=!1})),e.checkCurrentState()})),this.clearButton.classList.remove("d-none"),this.saveButton.classList.add("disabled"),this.saveButton.disabled=!0,this.container.querySelectorAll(".js-line-preference").forEach((function(t){t.addEventListener("change",(function(){e.checkCurrentState()}))})),setTimeout((function(){"$"in window&&(0,window.$)(document.querySelector(".alert-success")).slideUp(1e3)}),3e3))},e.prototype.checkCurrentState=function(){var e=this.getCurrentState(),t=this.initialState!==e;if(this.setButtonState(this.resetButton,t),this.setButtonState(this.saveButton,t),this.setButtonState(this.clearButton,""!==e),this.otherCount){var n=this.getAllCheckboxes().length,i=this.getSelectedCheckboxes().length,r=n-i;this.favoritesCount&&(this.favoritesCount.textContent="(".concat(i.toString(10),")")),this.otherCount.textContent="(".concat(r.toString(10),")")}},e.prototype.getAllCheckboxes=function(){return this.container.querySelectorAll('input[type="checkbox"]')},e.prototype.getCurrentState=function(){var e=[];return this.getSelectedCheckboxes().forEach((function(t){e.push(t.getAttribute("data-line-id"))})),e.sort(),e.join()},e.prototype.getSelectedCheckboxes=function(){return this.container.querySelectorAll('input[type="checkbox"]:checked')},e.prototype.resetFavoriteLines=function(){var e=this.initialState.split(",");this.getAllCheckboxes().forEach((function(t){var n=t.getAttribute("data-line-id");t.checked=e.indexOf(n)>-1})),this.checkCurrentState()},e.prototype.setButtonState=function(e,t){t?(e.disabled=!1,e.classList.remove("disabled")):(e.disabled=!0,e.classList.add("disabled"))},e}();t.Preferences=n},95:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwaggerUI=void 0;var n=function(){function e(){}return e.configure=function(){if("SwaggerUIBundle"in window&&"SwaggerUIStandalonePreset"in window){var e=window.SwaggerUIBundle,t=window.SwaggerUIStandalonePreset,n=document.querySelector('link[rel="swagger"]');if(!n)return;var i=e({url:n.getAttribute("href"),dom_id:"#swagger-ui",deepLinking:!0,presets:[e.presets.apis,t],plugins:[e.plugins.DownloadUrl,function(){return{components:{Topbar:function(){return null}}}}],layout:"StandaloneLayout",booleanValues:["false","true"],defaultModelRendering:"schema",displayRequestDuration:!0,jsonEditor:!0,showRequestHeaders:!0,supportedSubmitMethods:["get"],tryItOutEnabled:!0,validatorUrl:null,responseInterceptor:function(e){delete e.headers["content-security-policy"],delete e.headers["content-security-policy-report-only"],delete e.headers["permissions-policy"]}});window.ui=i}},e}();t.SwaggerUI=n},589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=void 0;var n=function(){function e(){}return e.prototype.initialize=function(){var e=document.querySelector('meta[name="x-site-user-id"]');if(e){var t=e.getAttribute("content");if(t){var n=window.appInsights;n&&n.setAuthenticatedUserContext(t)}}},e}();t.Telemetry=n},876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tracking=void 0;var n=function(){function e(){}return e.track=function(e,t,n){var i=!1;if("gtag"in window){var r={event_category:e,event_label:n};(window.gtag||function(){})("event",t,r),i=!0}return i},e}();t.Tracking=n}},n={};e=function e(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={exports:{}};return t[i](o,o.exports,e),o.exports}(547),window.addEventListener("load",(function(){(new e.App).initialize()}))})();
//# sourceMappingURL=main.js.map